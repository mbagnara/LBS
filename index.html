<!DOCTYPE html>
<html>
<head>
  <title>LBS - Leaner, Bigger, Stronger</title>
  <style>
    body {
      background-color: #f2f2f2;
      font-family: Arial, sans-serif;
    }
    
    .dropdown {
      width: 200px;
      margin: 20px auto;
    }
    
    .dropdown select,
    .dropdown input[type="text"],
    .dropdown input[type="date"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #cccccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    
    .dropdown button {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #4caf50;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    
    table {
      width: 600px;
      margin: 20px auto;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #dddddd;
    }

    th.fecha {
      width: 120px;
    }

    th.semana {
      width: 100px;
    }

    th.ejercicio {
      width: 300px;
    }

    .delete-button {
      background-color: #f44336;
    }

    .edit-button {
      background-color: #2196f3;
    }

    .edit-mode {
      background-color: #ffffcc;
    }

    h1 {
      text-align: center;
      font-size: 24px;
    }
  </style>
</head>
<body>
  <h1>LBS - Leaner, Bigger, Stronger</h1>

  <div class="dropdown">
    <input type="date" id="dateInput">
    <select id="weekSelect" onchange="enableFields()">
      <option value="">Selecciona una semana</option>
      <option value="Semana 1">Semana 1</option>
      <option value="Semana 2">Semana 2</option>
      <option value="Semana 3">Semana 3</option>
      <option value="Semana 4">Semana 4</option>
      <option value="Semana 5">Semana 5</option>
      <option value="Semana 6">Semana 6</option>
      <option value="Semana 7">Semana 7</option>
      <option value="Semana 8">Semana 8</option>
    </select>
    <select id="exerciseSelect" onchange="enableFields()">
      <option value="">Selecciona un ejercicio</option>
      <option value="Barbell Bench Press">Barbell Bench Press</option>
      <option value="Incline Barbell Bench Press">Incline Barbell Bench Press</option>
      <option value="Dumbbell Bench Press">Dumbbell Bench Press</option>
      <option value="Triceps Pushdown">Triceps Pushdown</option>
      <option value="Barbell Deadlift">Barbell Deadlift</option>
      <option value="One-Arm Dumbbell">One-Arm Dumbbell</option>
      <option value="Lat Pulldown (Wide-Grip)">Lat Pulldown (Wide-Grip)</option>
      <option value="Leg Press Calf Raise">Leg Press Calf Raise</option>
      <option value="Seated Dumbbell Press">Seated Dumbbell Press</option>
      <option value="Dumbbell Side Lateral Raise">Dumbbell Side Lateral Raise</option>
      <option value="Dumbbell Rear Lateral Raise">Dumbbell Rear Lateral Raise</option>
      <option value="Cable Crunch">Cable Crunch</option>
      <option value="Barbell Squat">Barbell Squat</option>
      <option value="Leg Press">Leg Press</option>
      <option value="Leg Curl (Lying or Seated)">Leg Curl (Lying or Seated)</option>
      <option value="Seated Calf Raise">Seated Calf Raise</option>
      <option value="Close-Grip Bench Press">Close-Grip Bench Press</option>
      <option value="Barbell Curl">Barbell Curl</option>
      <option value="Seated Triceps Press">Seated Triceps Press</option>
      <option value="Dumbbell Hammer Curl">Dumbbell Hammer Curl</option>
      <option value="Captain's Chair Leg Raise">Captain's Chair Leg Raise</option>
    </select>
    <input type="text" id="weightInput" placeholder="Ingrese el peso" pattern="[0-9]+" disabled>
    <button onclick="addExercise()">Add</button>
    <button onclick="clearTable()">Clear Data</button>
  </div>

  <table id="exerciseTable">
    <thead>
      <tr>
        <th class="fecha">Fecha</th>
        <th class="semana">Semana</th>
        <th class="ejercicio">Ejercicio</th>
        <th>Peso</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>
    // Obtener la fecha actual
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); // Enero es 0
    var yyyy = today.getFullYear();
    
    // Formatear la fecha en el formato YYYY-MM-DD
    var formattedDate = yyyy + '-' + mm + '-' + dd;
    
    // Establecer el valor por defecto en el campo de fecha
    document.getElementById('dateInput').value = formattedDate;

    // Cargar los datos almacenados en LocalStorage
    window.onload = function() {
      var storedData = JSON.parse(localStorage.getItem('exerciseData'));

      if (storedData) {
        var exerciseTable = document.getElementById("exerciseTable").getElementsByTagName("tbody")[0];

        for (var i = 0; i < storedData.length; i++) {
          var row = exerciseTable.insertRow();
          var dateCell = row.insertCell(0);
          var weekCell = row.insertCell(1);
          var exerciseCell = row.insertCell(2);
          var weightCell = row.insertCell(3);
          var editCell = row.insertCell(4);
          var deleteCell = row.insertCell(5);

          dateCell.innerHTML = storedData[i].date;
          weekCell.innerHTML = storedData[i].week;
          exerciseCell.innerHTML = storedData[i].exercise;
          weightCell.innerHTML = storedData[i].weight;

          var editButton = document.createElement("button");
          editButton.innerHTML = "Edit";
          editButton.className = "edit-button";
          editButton.onclick = editExercise;

          var deleteButton = document.createElement("button");
          deleteButton.innerHTML = "Delete";
          deleteButton.className = "delete-button";
          deleteButton.onclick = deleteExercise;

          editCell.appendChild(editButton);
          deleteCell.appendChild(deleteButton);
        }
      }
    };

    function enableFields() {
      var weekSelect = document.getElementById("weekSelect");
      var exerciseSelect = document.getElementById("exerciseSelect");
      var weightInput = document.getElementById("weightInput");

      if (weekSelect.value !== "" && exerciseSelect.value !== "") {
        weightInput.disabled = false;
      } else {
        weightInput.disabled = true;
        weightInput.value = "";
      }
    }

    function addExercise() {
      var dateInput = document.getElementById("dateInput");
      var weekSelect = document.getElementById("weekSelect");
      var exerciseSelect = document.getElementById("exerciseSelect");
      var weightInput = document.getElementById("weightInput");
      var exerciseTable = document.getElementById("exerciseTable").getElementsByTagName("tbody")[0];

      var date = dateInput.value;
      var week = weekSelect.value;
      var exercise = exerciseSelect.value;
      var weight = weightInput.value;

      if (date && week && exercise && weight) {
        var row = exerciseTable.insertRow();
        var dateCell = row.insertCell(0);
        var weekCell = row.insertCell(1);
        var exerciseCell = row.insertCell(2);
        var weightCell = row.insertCell(3);
        var editCell = row.insertCell(4);
        var deleteCell = row.insertCell(5);

        dateCell.innerHTML = date;
        weekCell.innerHTML = week;
        exerciseCell.innerHTML = exercise;
        weightCell.innerHTML = weight;

        var editButton = document.createElement("button");
        editButton.innerHTML = "Edit";
        editButton.className = "edit-button";
        editButton.onclick = editExercise;

        var deleteButton = document.createElement("button");
        deleteButton.innerHTML = "Delete";
        deleteButton.className = "delete-button";
        deleteButton.onclick = deleteExercise;

        editCell.appendChild(editButton);
        deleteCell.appendChild(deleteButton);

        // Guardar datos en LocalStorage
        var storedData = JSON.parse(localStorage.getItem('exerciseData')) || [];
        storedData.push({ date: date, week: week, exercise: exercise, weight: weight });
        localStorage.setItem('exerciseData', JSON.stringify(storedData));

        dateInput.value = formattedDate; // Restaurar la fecha actual por defecto
        weekSelect.value = "";
        exerciseSelect.value = "";
        weightInput.value = "";
        weightInput.disabled = true;
      }
    }

    function clearTable() {
      var exerciseTable = document.getElementById("exerciseTable").getElementsByTagName("tbody")[0];
      exerciseTable.innerHTML = ""; // Eliminar el contenido de la tabla

      // Eliminar los datos de LocalStorage
      localStorage.removeItem('exerciseData');
    }

    function editExercise() {
      var row = this.parentNode.parentNode;
      var cells = row.cells;
      var rowIndex = row.rowIndex;

      for (var i = 0; i < cells.length - 2; i++) {
        var cell = cells[i];

        // Habilitar la edición de la celda
        cell.contentEditable = true;
        cell.classList.add("edit-mode");

        if (i === 0) {
          var dateValue = cell.innerHTML;
          cell.innerHTML = "<input type='date' value='" + dateValue + "'>";
        } else if (i === 1) {
          var weekValue = cell.innerHTML;
          cell.innerHTML = "<select>" +
            "<option value=''>Selecciona una semana</option>" +
            "<option value='Semana 1' " + (weekValue === "Semana 1" ? "selected" : "") + ">Semana 1</option>" +
            "<option value='Semana 2' " + (weekValue === "Semana 2" ? "selected" : "") + ">Semana 2</option>" +
            "<option value='Semana 3' " + (weekValue === "Semana 3" ? "selected" : "") + ">Semana 3</option>" +
            "<option value='Semana 4' " + (weekValue === "Semana 4" ? "selected" : "") + ">Semana 4</option>" +
            "<option value='Semana 5' " + (weekValue === "Semana 5" ? "selected" : "") + ">Semana 5</option>" +
            "<option value='Semana 6' " + (weekValue === "Semana 6" ? "selected" : "") + ">Semana 6</option>" +
            "<option value='Semana 7' " + (weekValue === "Semana 7" ? "selected" : "") + ">Semana 7</option>" +
            "<option value='Semana 8' " + (weekValue === "Semana 8" ? "selected" : "") + ">Semana 8</option>" +
            "</select>";
        } else if (i === 2) {
          var exerciseValue = cell.innerHTML;
          cell.innerHTML = "<select>" +
            "<option value=''>Selecciona un ejercicio</option>" +
            "<option value='Barbell Bench Press' " + (exerciseValue === "Barbell Bench Press" ? "selected" : "") + ">Barbell Bench Press</option>" +
            "<option value='Incline Barbell Bench Press' " + (exerciseValue === "Incline Barbell Bench Press" ? "selected" : "") + ">Incline Barbell Bench Press</option>" +
            "<option value='Dumbbell Bench Press' " + (exerciseValue === "Dumbbell Bench Press" ? "selected" : "") + ">Dumbbell Bench Press</option>" +
            "<option value='Triceps Pushdown' " + (exerciseValue === "Triceps Pushdown" ? "selected" : "") + ">Triceps Pushdown</option>" +
            "<option value='Barbell Deadlift' " + (exerciseValue === "Barbell Deadlift" ? "selected" : "") + ">Barbell Deadlift</option>" +
            "<option value='One-Arm Dumbbell' " + (exerciseValue === "One-Arm Dumbbell" ? "selected" : "") + ">One-Arm Dumbbell</option>" +
            "<option value='Lat Pulldown (Wide-Grip)' " + (exerciseValue === "Lat Pulldown (Wide-Grip)" ? "selected" : "") + ">Lat Pulldown (Wide-Grip)</option>" +
            "<option value='Leg Press Calf Raise' " + (exerciseValue === "Leg Press Calf Raise" ? "selected" : "") + ">Leg Press Calf Raise</option>" +
            "<option value='Seated Dumbbell Press' " + (exerciseValue === "Seated Dumbbell Press" ? "selected" : "") + ">Seated Dumbbell Press</option>" +
            "<option value='Dumbbell Side Lateral Raise' " + (exerciseValue === "Dumbbell Side Lateral Raise" ? "selected" : "") + ">Dumbbell Side Lateral Raise</option>" +
            "<option value='Dumbbell Rear Lateral Raise' " + (exerciseValue === "Dumbbell Rear Lateral Raise" ? "selected" : "") + ">Dumbbell Rear Lateral Raise</option>" +
            "<option value='Cable Crunch' " + (exerciseValue === "Cable Crunch" ? "selected" : "") + ">Cable Crunch</option>" +
            "<option value='Barbell Squat' " + (exerciseValue === "Barbell Squat" ? "selected" : "") + ">Barbell Squat</option>" +
            "<option value='Leg Press' " + (exerciseValue === "Leg Press" ? "selected" : "") + ">Leg Press</option>" +
            "<option value='Leg Curl (Lying or Seated)' " + (exerciseValue === "Leg Curl (Lying or Seated)" ? "selected" : "") + ">Leg Curl (Lying or Seated)</option>" +
            "<option value='Seated Calf Raise' " + (exerciseValue === "Seated Calf Raise" ? "selected" : "") + ">Seated Calf Raise</option>" +
            "<option value='Close-Grip Bench Press' " + (exerciseValue === "Close-Grip Bench Press" ? "selected" : "") + ">Close-Grip Bench Press</option>" +
            "<option value='Barbell Curl' " + (exerciseValue === "Barbell Curl" ? "selected" : "") + ">Barbell Curl</option>" +
            "<option value='Seated Triceps Press' " + (exerciseValue === "Seated Triceps Press" ? "selected" : "") + ">Seated Triceps Press</option>" +
            "<option value='Dumbbell Hammer Curl' " + (exerciseValue === "Dumbbell Hammer Curl" ? "selected" : "") + ">Dumbbell Hammer Curl</option>" +
            "<option value='Captain's Chair Leg Raise' " + (exerciseValue === "Captain's Chair Leg Raise" ? "selected" : "") + ">Captain's Chair Leg Raise</option>" +
            "</select>";
        }
      }

      var saveButton = document.createElement("button");
      saveButton.innerHTML = "Save";
      saveButton.className = "edit-button";
      saveButton.onclick = saveExercise;

      var cancelButton = document.createElement("button");
      cancelButton.innerHTML = "Cancel";
      cancelButton.className = "delete-button";
      cancelButton.onclick = cancelEdit;

      cells[4].innerHTML = "";
      cells[4].appendChild(saveButton);

      cells[5].innerHTML = "";
      cells[5].appendChild(cancelButton);
    }

    function saveExercise() {
      var row = this.parentNode.parentNode;
      var cells = row.cells;

      for (var i = 0; i < cells.length - 2; i++) {
        var cell = cells[i];

        // Deshabilitar la edición de la celda
        cell.contentEditable = false;
        cell.classList.remove("edit-mode");

        if (i === 0) {
          cell.innerHTML = cell.querySelector("input").value;
        } else if (i === 1) {
          cell.innerHTML = cell.querySelector("select").value;
        } else if (i === 2) {
          cell.innerHTML = cell.querySelector("select").value;
        }
      }

      var editButton = document.createElement("button");
      editButton.innerHTML = "Edit";
      editButton.className = "edit-button";
      editButton.onclick = editExercise;

      var deleteButton = document.createElement("button");
      deleteButton.innerHTML = "Delete";
      deleteButton.className = "delete-button";
      deleteButton.onclick = deleteExercise;

      cells[4].innerHTML = "";
      cells[4].appendChild(editButton);

      cells[5].innerHTML = "";
      cells[5].appendChild(deleteButton);

      // Actualizar los datos en LocalStorage
      var storedData = JSON.parse(localStorage.getItem('exerciseData'));
      storedData[row.rowIndex - 1].date = cells[0].innerHTML;
      storedData[row.rowIndex - 1].week = cells[1].innerHTML;
      storedData[row.rowIndex - 1].exercise = cells[2].innerHTML;
      storedData[row.rowIndex - 1].weight = cells[3].innerHTML;
      localStorage.setItem('exerciseData', JSON.stringify(storedData));
    }

    function cancelEdit() {
      var row = this.parentNode.parentNode;
      var cells = row.cells;

      for (var i = 0; i < cells.length - 2; i++) {
        var cell = cells[i];

        // Deshabilitar la edición de la celda
        cell.contentEditable = false;
        cell.classList.remove("edit-mode");

        if (i === 0) {
          cell.innerHTML = cell.querySelector("input").value;
        } else if (i === 1) {
          cell.innerHTML = cell.querySelector("select").value;
        } else if (i === 2) {
          cell.innerHTML = cell.querySelector("select").value;
        }
      }

      var editButton = document.createElement("button");
      editButton.innerHTML = "Edit";
      editButton.className = "edit-button";
      editButton.onclick = editExercise;

      var deleteButton = document.createElement("button");
      deleteButton.innerHTML = "Delete";
      deleteButton.className = "delete-button";
      deleteButton.onclick = deleteExercise;

      cells[4].innerHTML = "";
      cells[4].appendChild(editButton);

      cells[5].innerHTML = "";
      cells[5].appendChild(deleteButton);
    }

    function deleteExercise() {
      var row = this.parentNode.parentNode;
      var rowIndex = row.rowIndex;

      var exerciseTable = document.getElementById("exerciseTable").getElementsByTagName("tbody")[0];
      exerciseTable.deleteRow(rowIndex - 1);

      // Actualizar los datos en LocalStorage
      var storedData = JSON.parse(localStorage.getItem('exerciseData'));
      storedData.splice(rowIndex - 2, 1);
      localStorage.setItem('exerciseData', JSON.stringify(storedData));
    }
  </script>
</body>
</html>
